<!DOCTYPE html>
<html lang="zh-cn">
<head>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-3XR6QD9MQ2"></script>
<script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-3XR6QD9MQ2');
    </script>
<meta charset="utf-8"/>
<meta content="MlCbTFwi8qVmMCmDnlISOYdFqFcBTIA3hdWJIev8ljg" name="google-site-verification"/>
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="Sswin" name="author"/>
<title>如何在 Mac OS X 上安裝 Verilog 環境 ｜ SSWIN</title>
<meta content=" 一句話摘要：使用 Icarus Verilog 來編譯 Verilog、使用 GTKWave 來顯示波形
" name="description"/>
<meta content="Verilog, 技术, 转载" name="keywords"/>
<meta content="summary" name="twitter:card"/>
<meta content="/post/verilog-on-macosx/" name="twitter:site"/>
<meta content="如何在 Mac OS X 上安裝 Verilog 環境" name="twitter:creator"/>
<meta content="如何在 Mac OS X 上安裝 Verilog 環境" name="twitter:title"/>
<meta content=" 一句話摘要：使用 Icarus Verilog 來編譯 Verilog、使用 GTKWave 來顯示波形
" name="twitter:description"/>
<meta content="https://zozo.sswin.site//images/favicon.ico" name="twitter:image"/>
<meta content="如何在 Mac OS X 上安裝 Verilog 環境" property="og:title"/>
<meta content="/post/verilog-on-macosx/" property="og:url"/>
<meta content="https://zozo.sswin.site//images/favicon.ico" property="og:image"/>
<meta content=" 一句話摘要：使用 Icarus Verilog 來編譯 Verilog、使用 GTKWave 來顯示波形
" name="og:description"/>
<meta content="如何在 Mac OS X 上安裝 Verilog 環境" property="og:site_name"/>
<meta content="article" property="og:type"/>
<meta content="" property="og:article:author"/>
<link href="https://zozo.sswin.site//images/favicon.ico" rel="shortcut icon"/>
<link href="https://zozo.sswin.site/css/normalize.css" media="screen" rel="stylesheet" type="text/css"/>
<link href="https://cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" media="screen" rel="stylesheet" type="text/css"/>
<link href="https://zozo.sswin.site/css/zozo.css" media="screen" rel="stylesheet" type="text/css"/>
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" media="screen" rel="stylesheet" type="text/css"/>
<link href="https://zozo.sswin.site/css/highlight.css" media="screen" rel="stylesheet" type="text/css"/>
<script src="https://unpkg.com/@waline/client@v2/dist/waline.js"></script>
<link href="https://unpkg.com/@waline/client@v2/dist/waline.css" rel="stylesheet"/>
</head>
<body>
<div class="main animate__animated animate__fadeInDown">
<div class="nav_container animated fadeInDown">
<div class="site_nav" id="site_nav">
<ul>
<li>
<a href="/">主页</a>
</li>
<li>
<a href="/posts/">归档</a>
</li>
<li>
<a href="/tags/">标签</a>
</li>
<li>
<a href="https://blogroll.sswin.site/">链接</a>
</li>
<li>
<a href="/about/">关于</a>
</li>
</ul>
</div>
<div class="menu_icon">
<a id="menu_icon"><i class="ri-menu-line"></i></a>
</div>
</div>
<div class="header animated fadeInDown">
<div class="site_title_container">
<div class="site_title">
<a href="https://zozo.sswin.site/">
<img alt="SSWIN" src="https://zozo.sswin.site//images/favicon.ico" style="border-radius:50px;width:100;"/>
</a>
</div>
<div class="description">
<p class="sub_title">放进时光蛋里。</p>
<div class="my_socials">
<a href="mailto://me@sswin.site" target="_blank" title="mail"><i class="ri-mail-fill"></i></a>
<a href="http://sms%3A%2F%2F18336983040" target="_blank" title="phone"><i class="ri-phone-fill"></i></a>
<a href="//t.me/karl_s_bot" target="_blank" title="telegram"><i class="ri-telegram-fill"></i></a>
<a href="https://zozo.sswin.site/index.xml" target="_blank" title="rss" type="application/rss+xml"><i class="ri-rss-fill"></i></a>
</div>
</div>
</div>
</div>
<div class="content">
<div class="post_page">
<div class="post animate__animated animate__fadeInDown">
<div class="post_title post_detail_title">
<h2><a href="/post/verilog-on-macosx/">如何在 Mac OS X 上安裝 Verilog 環境</a></h2>
<span class="date">2022.09.05</span>
</div>
<div class="post_content markdown"><blockquote>
<p>一句話摘要：使用 Icarus Verilog 來編譯 Verilog、使用 GTKWave 來顯示波形</p>
</blockquote>
<p>為了資工系的數位電路設計課，我們需要一個能夠編譯 Verilog 這個硬體描述語言 (HDL) 的環境，並且要能模擬電路運作狀況加上顯示波形。</p>
<p>老師建議的編譯環境是 <a href="https://www.mentor.com/products/fpga/model/">ModelSim</a>，但是它只支援 Windows，我目前還沒找到 Mac OS X 或是 Linux 的版本，所以我只好另尋他法，找看看有沒有其他能夠編譯 Verilog 的工具。</p>
<p>我找到了 <a href="http://iverilog.icarus.com/home">Icarus Verilog</a>，它是針對 Linux 的 Verilog 編譯器，而在 Mac OS X 底下，我們可以藉由 Command Line 來使用它。</p>
<p>這是 <a href="http://iverilog.wikia.com/wiki/Installation_Guide">Icarus Verilog 的安裝指南</a>，很完整的說明了怎麼在各種作業系統上安裝它，不過是英文的，而且字有點多。</p>
<p>對於 Mac OS X 你有兩種安裝手段，編譯程式原始碼來安裝，或是透過套件管理系統安裝，對於我這種懶人來說，當然是選擇使用套件管理系統囉！</p>
<p>我使用 <a href="http://brew.sh/index_zh-tw.html">Homebrew</a> 來安裝 Icarus Verilog，如果你還沒有安裝 Homebrew，去把它裝起來吧！身為一位 Mac 用戶兼資工系學生，Homebrew 必備呀！</p>
<p>你可以在你的 Command Line 裡輸入這段文字來安裝 Homebrew（請忽略最左方的 $ 符號，這是 Command Line 的提示字元）：</p>
<div class="highlight"><pre class="chroma" tabindex="0"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
</span></span></code></pre></div><p>接著使用這段 homebrew 的指令來安裝 Icarus Verilog：</p>
<div class="highlight"><pre class="chroma" tabindex="0"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ brew install icarus-verilog
</span></span></code></pre></div><p>OK！現在你已經成功安裝了 Icarus Verilog 了！Homebrew 就是這麼的神奇！</p>
<p>安裝完了一個新程式，當然是要測試一下它的功能正不正常呀，這時就輪到經典 Hello World 測試程式登場了！</p>
<p>首先建立一個新文件命名為 hello.v，內含以下內容（Verilog 的源碼檔副檔名為. v）：</p>
<div class="highlight"><pre class="chroma" tabindex="0"><code class="language-v" data-lang="v"><span class="line"><span class="cl"><span class="kn">module</span> <span class="nv">main</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">initial</span>
</span></span><span class="line"><span class="cl">    <span class="nv">begin</span>
</span></span><span class="line"><span class="cl">      <span class="o">$</span><span class="nf">display</span><span class="p">(</span><span class="s2">"Hello, World"</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="o">$</span><span class="nv">finish</span> <span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nv">end</span>
</span></span><span class="line"><span class="cl"><span class="nv">endmodule</span>
</span></span></code></pre></div><p>接著使用 iverilog 指令來編譯 hello.v，使用 - o hello 來指定以 hello 來作為產生的可執行檔檔名：</p>
<div class="highlight"><pre class="chroma" tabindex="0"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ iverilog -o hello hello.v
</span></span></code></pre></div><p>最後，使用 vvp 指令來執行 hello 這個可執行檔，只要你看到 Hello, World 這個輸出，就代表你的 Icarus Verilog 安裝成功了：</p>
<div class="highlight"><pre class="chroma" tabindex="0"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ vvp hello
</span></span><span class="line"><span class="cl">Hello, World
</span></span></code></pre></div><p>接著，為了能夠更方便地查看電路運作的狀況，你需要一個波型顯示軟體，我使用 <a href="http://gtkwave.sourceforge.net/">GTKWave</a>，這是一個可以跑在 Mac OS X、Linux、和 Windows 上的波型顯示軟體，使用效果如下圖（截圖自官網）：</p>
<p><img alt="" src="https://i.imgur.com/qRG7zAU.jpg"/></p>
<p>要在 Mac OS X 上安裝它很容易，就跟你安裝其他應用程式一樣，最大的困難可能是在官網上找到正確的下載連結……，連結已經幫你標出來了，請在官網上找到上圖紅框處 download 連結把它點下去！</p>
<p>接著把載下來了. zip 檔解壓縮，完畢後得到的. app 檔就是你要的 GTKWave 了！隨點隨用免安裝，那～麼～厲害！</p>
<p>先別急著打開你的 GTKWave，你還需要一個新的測試程式，之前的 hello world 程式可根本不算是一個電路呢！</p>
<p>首先建立兩個新檔案，命名為 Simple_Circuit.v 和 t_Simple_Circuit.v（修改自我們老師的 Lab0 範例）：</p>
<div class="highlight"><pre class="chroma" tabindex="0"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">module	Simple_Circuit(A, B, C, D, E);
</span></span><span class="line"><span class="cl">  output	D, E;
</span></span><span class="line"><span class="cl">  input	A, B, C;
</span></span><span class="line"><span class="cl">  wire	w1;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	and		G1(w1, A, B);
</span></span><span class="line"><span class="cl">	not		G2(E, C);
</span></span><span class="line"><span class="cl">	or		G3(D, w1, E);
</span></span><span class="line"><span class="cl">endmodule
</span></span></code></pre></div><div class="highlight"><pre class="chroma" tabindex="0"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">module	t_Simple_Circuit;
</span></span><span class="line"><span class="cl">  wire	D, E;
</span></span><span class="line"><span class="cl">  reg		A, B, C;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  Simple_Circuit	M1(A, B, C, D, E);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  initial	begin
</span></span><span class="line"><span class="cl">    $dumpfile("mytest.vcd");
</span></span><span class="line"><span class="cl">    $dumpvars;
</span></span><span class="line"><span class="cl">    A=1'b0; B=1'b0; C=1'b0;
</span></span><span class="line"><span class="cl">    #100 A=1'b1; B=1'b1; C=1'b1;
</span></span><span class="line"><span class="cl">  end
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  initial #200 $finish;
</span></span><span class="line"><span class="cl">endmodule
</span></span></code></pre></div><p>將這兩個檔案編譯為 mycircuit 這個執行檔，並且執行它：</p>
<div class="highlight"><pre class="chroma" tabindex="0"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ iverilog -o mycircuit t_Simple_Circuit.v Simple_Circuit.v
</span></span><span class="line"><span class="cl">$ vvp mycircuit
</span></span></code></pre></div><p>因為我們在 t_Simple_Circuit.v 這個電路測試檔案裡頭加入了 dumpfile 和 dumpvars，所以執行完 mycircuit 後，會產生一個名為 mytest.vcd 的檔案，裡頭包含了我們所要的波型紀錄。</p>
<p>現在我們可以使用 GTKWave 來檢視波型了！</p>
<p>開啟你的 GTKWave，點擊左上角的 File &gt; Open New Tab 選擇剛剛產生的 mytest.vcd 檔，你應該會很失望地發現為什麼沒有出現你要的波型，如下圖：</p>
<p><img alt="" src="https://i.imgur.com/RJIQuvS.jpg"/></p>
<p>那是因為你還沒有告訴 GTKWave 你想要看什麼，那我們就來告訴它吧！</p>
<p>在 GTKWave 左側面板，你會看到一串文字寫著 t_Simple_Circuit，那就是你的測試檔案，點開那個 + 號，點擊 M1 電路，下面就會列出 M1 電路裡所有的線路，把你想要看它波形的線路拖曳到右方的區塊吧！噠答！你要的波型顯示出來了！</p>
<p><img alt="" src="https://i.imgur.com/86eXv9b.jpg"/></p>
<p>恭喜你成功建置你的 Verilog 環境，現在你可以炫砲地使用你的 Macbook 來做數電設計作業了！</p>
<div class="highlight"><pre class="chroma" tabindex="0"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ iverilog -o &lt;output-file&gt; &lt;source-file-1&gt; &lt;source-file-2&gt; ... // 編譯
</span></span><span class="line"><span class="cl">$ vvp &lt;executable-verilog-file&gt; // 執行
</span></span></code></pre></div></div>
<div class="post_footer">
<div class="meta">
<div class="info">
<span class="field tags">
<i class="ri-stack-line"></i>
<a href="https://zozo.sswin.site/tags/verilog/">Verilog</a>
<a href="https://zozo.sswin.site/tags/%E6%8A%80%E6%9C%AF/">技术</a>
<a href="https://zozo.sswin.site/tags/%E8%BD%AC%E8%BD%BD/">转载</a>
</span>
</div>
</div>
</div>
</div>
<script async="" crossorigin="anonymous" data-category="General" data-category-id="DIC_kwDOIgezUM4CTB6g" data-emit-metadata="0" data-input-position="top" data-lang="zh-CN" data-loading="lazy" data-mapping="pathname" data-reactions-enabled="1" data-repo="winsight/hugo_zozo_comment" data-repo-id="R_kgDOIgezUA" data-strict="0" data-theme="light" src="https://giscus.app/client.js">
</script>
</div>
</div>
</div>
<a class="back_to_top" href="#" id="back_to_top"><i class="ri-arrow-up-s-line"></i></a>
<footer class="footer">
<div class="powered_by">
<a href="https://timegg.top">SSWIN © 2022 ,</a>
<a href="http://www.gohugo.io/">Powered by Hugo.</a>
</div>
<div class="footer_slogan">
<span>享受当下。</span>
</div>
</footer>
<script>
	(function () {
		const customFont = document.createElement('link');
		customFont.href = "https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@500;700&display=swap";
		customFont.type = "text/css";
		customFont.rel = "stylesheet";
		document.head.appendChild(customFont);
	}());
</script>
<script src="https://zozo.sswin.site/js/jquery-3.5.1.min.js"></script>
<link href="https://zozo.sswin.site/css/fancybox.min.css" rel="stylesheet"/>
<script src="https://zozo.sswin.site/js/fancybox.min.js"></script>
<script src="https://zozo.sswin.site/js/zozo.js"></script>
</body>
</html>